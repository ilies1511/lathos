<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>ChildSafeNow – Einstellungen</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    h1 { font-size: 1.5em; }
    .option-group { margin: 10px 0; }
    .status { margin-top: 15px; color: green; display: none; }
  </style>
</head>
<body>
  <h1>ChildSafeNow – Filterstufe</h1>
  <div class="option-group">
    <label><input type="radio" name="filterLevel" value="low"> Niedrig (nur harte Trigger)</label><br>
    <label><input type="radio" name="filterLevel" value="medium"> Mittel (Trigger + zusätzliche Begriffe)</label><br>
    <label><input type="radio" name="filterLevel" value="high"> Hoch (erweiterte Liste)</label>
  </div>
  <div class="status" id="status">Einstellungen gespeichert!</div>

  <script>
    const statusEl = document.getElementById('status');
    const radios = document.querySelectorAll('input[name="filterLevel"]');

    // Lädt gespeicherte Filterstufe aus chrome.storage
    document.addEventListener('DOMContentLoaded', () => {
      chrome.storage.sync.get({ filterLevel: 'medium' }, data => {
        const level = data.filterLevel;
        const radio = document.querySelector(`input[value="${level}"]`);
        if (radio) radio.checked = true;
      });
    });

    // Speichert neue Filterstufe bei Änderung
    radios.forEach(radio => {
      radio.addEventListener('change', () => {
        const selected = document.querySelector('input[name="filterLevel"]:checked').value;
        chrome.storage.sync.set({ filterLevel: selected }, () => {
          // Kurze Bestätigung anzeigen
          statusEl.style.display = 'block';
          setTimeout(() => statusEl.style.display = 'none', 1500);
        });
      });
    });
  </script>
</body>
</html>
